generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Comissao {
  id             String  @id @default(uuid())
  representadaId Int
  percentual     String
  pagamento      String
  diaPagamento   String
  banco          String
  agencia        String
  conta          String
  comNF          Boolean
}

model Compromisso {
  id             String @id @default(uuid())
  representadaId Int
  tipo           String
  dia            Int
  mes            String
  status         String
}

model Contato {
  id             String @id @default(uuid())
  representadaId Int
  nome           String
  cargo          String
  telefone       String
  email          String
}

model Interacoes {
  id             String        @id(map: "Interacao_pkey") @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  clienteId      Int
  representadaId Int
  tipo           String
  data           DateTime      @db.Timestamp(6)
  responsavel    String
  descricao      String
  status         String
  cliente        clientes      @relation(fields: [clienteId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_cliente")
  representada   Representadas @relation(fields: [representadaId], references: [id], onDelete: Cascade, onUpdate: NoAction, map: "fk_representada")
}

model Metas {
  id             String @id(map: "Meta_pkey") @default(uuid())
  representadaId Int
  anual          String
  mensal         String
}

model MetasMensais {
  id             String        @id @default(uuid())
  mes            String
  meta           String
  realizado      String?
  status         String
  representadaId Int
  representada   Representadas @relation(fields: [representadaId], references: [id])
}

model NotasFiscais {
  id             String @id(map: "NotaFiscal_pkey") @default(uuid())
  representadaId Int
  numero         String
  data           String
  valor          String
  status         String
  arquivo        String
}

model Prazo {
  id             String @id @default(uuid())
  representadaId Int
  faturamento    String
  entrega        String
}

model Produto {
  id             String @id @default(uuid())
  representadaId Int
  codigo         String
  nome           String
  preco          String
  unidade        String
}

model Representadas {
  id                 Int            @id @default(autoincrement())
  nome               String
  segmento           String
  cidade             String
  estado             String
  contato            String
  telefone           String
  email              String
  status             String
  metaAnual          Decimal        @db.Decimal(12, 2)
  vendasRealizadas   Decimal        @db.Decimal(12, 2)
  percentualMeta     Float
  comissoesGeradas   Decimal        @db.Decimal(12, 2)
  percentualComissao Float
  interacoes         Interacoes[]
  metasMensais       MetasMensais[]
  vendas             Vendas[]
}

model Vendas {
  id             String        @id @default(uuid())
  data           DateTime
  valor          Float
  representadaId Int
  clienteId      Int
  comissao       Float?
  status         String?
  valorFaturado  Float?
  cliente        clientes      @relation(fields: [clienteId], references: [id])
  representada   Representadas @relation(fields: [representadaId], references: [id])
}

model clientes {
  id           Int          @id @default(autoincrement())
  nome         String
  cnpj         String       @unique @db.VarChar(18)
  categoria    String?      @db.VarChar(50)
  telefone     String?      @db.VarChar(20)
  responsavel  String?
  cidade       String?      @db.VarChar(100)
  estado       String?      @db.Char(2)
  ultimaCompra DateTime?    @db.Date
  status       String?      @default(dbgenerated("true")) @db.VarChar(10)
  interacoes   Interacoes[]
  vendas       Vendas[]
}
